
<section class="search" :class="{'search--hide-categories': hideCategories}">
  <form
    action="/materials/search/"
    @submit.prevent="onSubmit"
  >
    <div class="search__fields">
      <div class="search__input">Label</div>
      <div class="search__autocomplete">
        <v-select
          :options="keywords"
          :multiple="true"
          :placeholder="placeholder"
          @search="onSearch"
          taggable
          inputId="tags"
          push-tags
          v-model="formData.search_text"
          name="keywords"
          :resetOnOptionsChange="true"
        >
          <span slot="no-options">{{ $t('Sorry-no-results-found') }}</span>
        </v-select>
      </div>
      <div class="search__chooser search__select" v-if="!hideCategories">
        <select
          name="categories"
          @change="changeFilterCategory"
          v-if="showSelectedCategory && filter_category"
        >
          <option value="" hidden>{{ filter_category.title }}</option>
          <option
            v-for="category in filter_category.items"
            :value="category.external_id"
          >{{category.title}}</option>
        </select>
        <select
          name="categories"
          v-else-if="filter_categories"
          @change="onChangeCategory"
        >
          <option
            v-for="category in filter_categories.results"
            :value="category.external_id"
          >{{category.title}}</option>
        </select>
      </div>
      <button
        class="button"
        type="submit"
        :disabled="!formData.search_text || (formData.search_text && !formData.search_text.length)"
      >
        {{ $t('Search') }}
      </button>
    </div>
    <div class="search__themes" v-if="!hideFilter">
      <h4 class="search__themes_title">{{ $t('Filter-search-results') }}</h4>
      <div
        v-if="active_category && active_category.external_id === 'lom.lifecycle.contribute.publisherdate'"
        class="search__themes_items search__themes_items--inline"
      >
        <DatesRange
          v-model="dates_range"
          :hide-select="true"
          :inline="true"
        ></DatesRange>
      </div>
      <ul v-else-if="active_category" class="search__themes_items">
        <li v-for="item in active_category.items" class="search__themes_item">
          <input
            type="checkbox"
            :id="item.external_id"
            :value="item.external_id"
            v-model="filter[item.external_id]"
            name="search_category"
          >
          <label :for="item.external_id">{{item.title}}</label>
        </li>
      </ul>
    </div>
    <div class="search__themes_mobile" v-if="!hideFilter">
      <button class="search__themes_mobile_button" @click.prevent="showMobileFilterOptions"
              :class="{
            'search__themes_mobile_button--plus': showMobileFilter === false,
            'search__themes_mobile_button--minus': showMobileFilter === true
          }"
      >
        {{ $t('Filter-options') }}
      </button>
      <ul v-if="showMobileFilter" class="search__themes_items">
        <li v-for="item in active_category.items" class="search__themes_item">
          <input
            type="checkbox"
            :id="item.external_id"
            :value="item.external_id"
            v-model="filter[item.external_id]"
            name="search_category"
          >
          <label :for="item.external_id">{{item.title}}</label>
        </li>
      </ul>
    </div>
  </form>
</section>
